<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>로또 파싱</title>
</head>
<body>

<h2>로또 결과</h2>
<div id="result">불러오는 중...</div>

<script>
async function load() {
  const url = "https://www.dhlottery.co.kr/lt645/result";

  const res = await fetch(url);
  const html = await res.text();

  // 1️⃣ 회차 추출
  const roundMatch = html.match(/<h4>.*?([0-9]+)회.*?<\/h4>/s);
  const round = roundMatch ? roundMatch[1] : "회차없음";

  // 2️⃣ 번호 영역만 잘라내기
  const sectionMatch = html.match(/<div class="win_result">([\s\S]*?)<\/div>\s*<\/div>/);
  if (!sectionMatch) {
    document.getElementById("result").textContent = "번호 영역 못 찾음";
    return;
  }

  const section = sectionMatch[1];

  // 3️⃣ 공 번호 추출
  const numbers = [...section.matchAll(/<span class="ball_645 lrg.*?">([0-9]+)<\/span>/g)]
                  .map(m => m[1]);

  if (!numbers.length) {
    document.getElementById("result").textContent = "번호 추출 실패";
    return;
  }

  const main = numbers.slice(0,6);
  const bonus = numbers[6];

  document.getElementById("result").innerHTML =
    `<h3>${round}회</h3>` +
    main.map(n => `<b>[${n}]</b>`).join(" ") +
    ` + <b>${bonus}</b>`;
}

load();
</script>

</body>
</html>