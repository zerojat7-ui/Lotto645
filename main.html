<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>로또의 모든것</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">

  <!-- í—¤ë” -->
  <div class="header">
    <h1 style="font-size:16px;margin:0;">🎰 로또의 모든것</h1>
    <div id="latestDraw" style="margin-top:10px;padding:10px;background:#f8f9fa;border-radius:10px;">
      <div style="font-size:11px;color:#888;margin-bottom:6px;" id="latestRoundLabel">ë°ì´í„° ë¡œë”© ì¤‘...</div>
      <div id="latestBalls" style="display:flex;gap:5px;justify-content:center;flex-wrap:wrap;"></div>
    </div>
  </div>

  <!-- íƒ­: ë‹¹ì²¨ / ë¶„ì„ / ì¶”ì²œ / ë°˜ìžë™ / ê¸°ë¡ -->
  <div class="tabs">
    <button class="tab active" onclick="switchTab('winning',this)">ðŸ† ë‹¹ì²¨</button>
    <button class="tab"        onclick="switchTab('analysis',this)">ðŸ“Š ë¶„ì„</button>
    <button class="tab"        onclick="switchTab('recommend',this)">ðŸŽ¯ ì¶”ì²œ</button>
    <button class="tab"        onclick="switchTab('semiauto',this)">âœï¸ ë°˜ìžë™</button>
    <button class="tab"        onclick="switchTab('records',this)">ðŸ“‹ ê¸°ë¡</button>
  </div>

  <!-- â–¶ ë‹¹ì²¨ íƒ­ -->
  <div id="content-winning" class="content">
    <div class="section-title">ðŸ† ë‹¹ì²¨ ë²ˆí˜¸</div>
    <div id="winningList">
      <div style="text-align:center;color:#aaa;padding:30px;font-size:14px;">ë°ì´í„° ë¡œë”© ì¤‘...</div>
    </div>
  </div>

  <!-- â–¶ ë¶„ì„ íƒ­ -->
  <div id="content-analysis" class="content hidden">
    <div class="stats-grid">
      <div class="stat-card"><div class="stat-label">ì´ íšŒì°¨</div><div class="stat-value" id="stat-total">0</div></div>
      <div class="stat-card"><div class="stat-label">ìµœê·¼20íšŒ ê¸°ì¤€</div><div class="stat-value" style="font-size:16px;padding-top:6px;" id="stat-range">-</div></div>
      <div class="stat-card"><div class="stat-label">í™€ìˆ˜ ë¹„ìœ¨</div><div class="stat-value" id="stat-odd">0%</div></div>
      <div class="stat-card"><div class="stat-label">ì§ìˆ˜ ë¹„ìœ¨</div><div class="stat-value" id="stat-even">0%</div></div>
    </div>
    <div class="section-title">ðŸ”¥ í•«ë„˜ë²„ (ìµœê·¼ 20íšŒ top10)</div>
    <div class="number-grid" id="hotGrid"></div>
    <div class="section-title">â„ï¸ ì½œë“œë„˜ë²„ (ìµœê·¼ 20íšŒ bottom10)</div>
    <div class="number-grid" id="coldGrid"></div>
    <div class="section-title">ðŸ“Š ì „ì²´ ë²ˆí˜¸ (1~45)</div>
    <div class="number-grid" id="allGrid"></div>
    <div id="numberDetail" class="analysis-section hidden"></div>
    <div class="analysis-section">
      <div class="analysis-title">ðŸ“ˆ ì—°ì†ë²ˆí˜¸ ë¶„ì„</div>
      <div class="analysis-item"><span class="analysis-label">ì „ì²´ í¬í•¨ìœ¨</span><span class="analysis-value" id="consec-all">0%</span></div>
      <div class="analysis-item"><span class="analysis-label">ì „ì²´ í‰ê· </span><span class="analysis-value" id="consec-all-avg">0ê°œ</span></div>
      <div class="analysis-item"><span class="analysis-label">ìµœê·¼ 20íšŒ í¬í•¨ìœ¨</span><span class="analysis-value" id="consec-recent">0%</span></div>
      <div class="analysis-item"><span class="analysis-label">ìµœê·¼ 20íšŒ í‰ê· </span><span class="analysis-value" id="consec-recent-avg">0ê°œ</span></div>
    </div>
    <div class="analysis-section">
      <div class="analysis-title">ðŸ”— ACê°’ ë¶„ì„</div>
      <div class="analysis-item"><span class="analysis-label">ì „ì²´ í‰ê· </span><span class="analysis-value" id="ac-all">0</span></div>
      <div class="analysis-item"><span class="analysis-label">ìµœê·¼ 20íšŒ í‰ê· </span><span class="analysis-value" id="ac-recent">0</span></div>
      <div class="analysis-item"><span class="analysis-label">ìµœë¹ˆ ACê°’</span><span class="analysis-value" id="ac-mode">0</span></div>
    </div>
    <div class="section-title">ðŸ† TOP 15 ë¹ˆì¶œë²ˆí˜¸</div>
    <div class="bar-chart" id="topBars"></div>
  </div>

  <!-- â–¶ ì¶”ì²œ íƒ­ -->
  <div id="content-recommend" class="content hidden">
    <div class="section-title">ðŸŽ¯ AI ì¶”ì²œ ë²ˆí˜¸</div>
    <div class="analysis-section" style="text-align:center;">
      <div style="font-weight:bold;">ì¶”ì²œ ëŒ€ìƒ íšŒì°¨: <span id="nextRoundLabel" style="color:#667eea;font-size:20px;">-</span> íšŒ</div>
      <div style="font-size:12px;color:#666;margin-top:4px;">ê°±ì‹  íšŸìˆ˜: <span id="refreshCount">0</span></div>
    </div>
    <hr style="margin:14px 0;border-color:#eee;">

    <button class="btn btn-primary" id="advancedBtn" onclick="runAdvancedEngine()">ðŸš€ ê³ ê¸‰ ë¶„ì„ (íë¸Œ ML ì—”ì§„)</button>
    <div id="advancedMonitor" style="display:none;">
      <div id="monitorPhaseRow" style="display:flex;gap:6px;margin-bottom:10px;font-size:11px;">
        <div id="phaseML"   class="phase-badge phase-wait">â‘  MLëª¨ë¸</div>
        <div style="color:#555;line-height:24px;">â†’</div>
        <div id="phaseEVO"  class="phase-badge phase-wait">â‘¡ íë¸Œì§„í™”</div>
        <div style="color:#555;line-height:24px;">â†’</div>
        <div id="phasePOOL" class="phase-badge phase-wait">â‘¢ ì¡°í•©ìƒì„±</div>
        <div style="color:#555;line-height:24px;">â†’</div>
        <div id="phaseDONE" class="phase-badge phase-wait">â‘£ ì™„ë£Œ</div>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;">
        <span id="monitorPhaseText" style="font-size:12px;color:#aaa;">ì¤€ë¹„ ì¤‘...</span>
        <span id="monitorPercent"   style="font-weight:bold;color:#00ff88;font-size:14px;">0%</span>
      </div>
      <div style="background:#333;border-radius:8px;height:18px;overflow:hidden;margin-bottom:4px;position:relative;">
        <div id="monitorBar" style="height:100%;width:0%;background:linear-gradient(90deg,#667eea,#00ff88);transition:width 0.4s;border-radius:8px;"></div>
      </div>
      <div style="display:flex;justify-content:space-between;font-size:10px;color:#666;margin-bottom:10px;">
        <span id="monitorElapsed">ê²½ê³¼: 0s</span>
        <span id="monitorETA">ë‚¨ì€ ì‹œê°„: ê³„ì‚° ì¤‘...</span>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:10px;text-align:center;">
        <div style="background:#16213e;border-radius:8px;padding:10px;">
          <div style="font-size:10px;color:#aaa;margin-bottom:3px;">ë¼ìš´ë“œ</div>
          <div style="display:flex;align-items:baseline;justify-content:center;gap:2px;">
            <div id="monitorRound" style="font-size:20px;font-weight:bold;color:#667eea;">0</div>
            <div id="monitorRoundTotal" style="font-size:10px;color:#555;">/ 50</div>
          </div>
        </div>
        <div style="background:#16213e;border-radius:8px;padding:10px;">
          <div style="font-size:10px;color:#aaa;margin-bottom:3px;">í›„ë³´ ì¡°í•©</div>
          <div id="monitorCandidates" style="font-size:20px;font-weight:bold;color:#ffd700;">0</div>
        </div>
        <div style="background:#16213e;border-radius:8px;padding:10px;">
          <div style="font-size:10px;color:#aaa;margin-bottom:3px;">ìµœê³  ì ìˆ˜</div>
          <div id="monitorBestScore" style="font-size:18px;font-weight:bold;color:#ff6b6b;">-</div>
        </div>
      </div>
      <div style="background:#16213e;border-radius:8px;padding:10px;margin-bottom:8px;">
        <div style="font-size:10px;color:#aaa;margin-bottom:6px;">ðŸŽ² í˜„ìž¬ íƒìƒ‰ ì¡°í•©</div>
        <div id="monitorCurrentCombo" style="display:flex;gap:5px;justify-content:center;min-height:32px;align-items:center;">
          <span style="color:#555;font-size:12px;">ëŒ€ê¸° ì¤‘...</span>
        </div>
      </div>
      <div style="background:#0d1117;border-radius:8px;padding:10px;">
        <div style="display:flex;justify-content:space-between;margin-bottom:4px;">
          <span style="font-size:10px;color:#aaa;">ðŸ“‹ ì‹¤ì‹œê°„ ë¡œê·¸</span>
          <span id="monitorLogCount" style="font-size:10px;color:#555;">0ê°œ</span>
        </div>
        <div id="monitorLog" style="font-size:11px;font-family:monospace;color:#00ff88;max-height:100px;overflow-y:auto;line-height:1.9;"></div>
      </div>
    </div>
    <div id="advancedResults"></div>

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px;">
      <button class="btn btn-primary"   style="margin:0;" onclick="refreshRecommendations()">ðŸ”„ ê°±ì‹ </button>
      <button class="btn btn-save"      style="margin:0;" id="recSaveBtn" onclick="saveSelectedRecs()" disabled>ðŸ’¾ ì €ìž¥</button>
    </div>
    <div id="recommendations"></div>
    <div class="alert alert-warning" style="text-align:center;margin-top:10px;">
      âš ï¸ ë¡œë˜ëŠ” í™•ë¥  ê²Œìž„ìž…ë‹ˆë‹¤.
    </div>
  </div>

  <!-- â–¶ ë°˜ìžë™ íƒ­ -->
  <div id="content-semiauto" class="content hidden">
    <div class="section-title">âœï¸ ë°˜ìžë™ ë²ˆí˜¸ ìƒì„±</div>
    <div class="alert alert-info" style="margin-bottom:14px;font-size:13px;">
      ë²ˆí˜¸ë¥¼ ì§ì ‘ í„°ì¹˜í•´ì„œ ì„ íƒ (ìµœëŒ€ 6ê°œ).<br>6ê°œ ë¯¸ë§Œì´ë©´ ë‚˜ë¨¸ì§€ëŠ” íë¸Œ ì—”ì§„ ìžë™ ì™„ì„±.
    </div>
    <div id="semiautoTickets"></div>
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:10px;">
      <button class="btn btn-primary"   style="margin:0;" onclick="addSemiTicket()">+ ì¶”ê°€</button>
      <button class="btn btn-secondary" style="margin:0;" onclick="clearAllTickets()">ì´ˆê¸°í™”</button>
      <button class="btn btn-save"      style="margin:0;" id="semiSaveBtn" onclick="saveSemiTickets()" disabled>ðŸ’¾ ì €ìž¥</button>
    </div>
    <div id="semiResultPanel" style="display:none;">
      <div class="section-title" style="margin-top:10px;">ðŸŽŸï¸ ì™„ì„±ëœ ë²ˆí˜¸</div>
      <div id="semiResultList"></div>
      <button class="btn btn-primary" onclick="regenerateAuto()">ðŸ”„ ìžë™ ë¶€ë¶„ ìž¬ìƒì„±</button>
    </div>
  </div>

  <!-- â–¶ ê¸°ë¡ íƒ­ -->
  <div id="content-records" class="content hidden" style="overflow:visible;padding-bottom:8px;">
    <div class="section-title">ðŸ“‹ ë‚˜ì˜ ì¶”ì²œ ê¸°ë¡</div>
    <div id="recordsList">
      <div style="text-align:center;color:#aaa;padding:20px;font-size:13px;">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>
    </div>
  </div>

</div><!-- /container -->

<!-- ë²ˆí˜¸ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ -->
<div id="dialogOverlay" class="dialog-overlay hidden" onclick="closeDialogOutside(event)">
  <div class="dialog-box" onclick="event.stopPropagation()">
    <div class="dialog-title" id="dialogTitle">ë²ˆí˜¸ ì„ íƒ</div>
    <div class="dialog-grid" id="dialogGrid"></div>
    <div class="dialog-actions">
      <button class="d-cancel"  onclick="closeDialog()">ì·¨ì†Œ</button>
      <button class="d-confirm" onclick="confirmDialog()">í™•ì¸</button>
    </div>
  </div>
</div>

<!-- Firebase compat SDK -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
<script>
    firebase.initializeApp({
        apiKey:            "AIzaSyB4S8qkK07QYXq5yw0Coo69sZBIk0uew2E",
        authDomain:        "randextraccube-engine.firebaseapp.com",
        projectId:         "randextraccube-engine",
        storageBucket:     "randextraccube-engine.firebasestorage.app",
        messagingSenderId: "515597545439",
        appId:             "1:515597545439:web:f1e804554406719a3cde6a"
    });
    window._lottoDB = firebase.firestore();
</script>

<script src="https://zerojat7-ui.github.io/LibraryJS/cube-engine.js"></script>
<script src="analysis.js"></script>
<script src="records.js"></script>
<script src="recommend.js"></script>
<script src="semiauto.js"></script>
<script>window._FORCE_IS_MAIN = true;</script>
<script src="app.js"></script>

</body>
</html>
