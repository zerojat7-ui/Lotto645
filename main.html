<!DOCTYPE html>

<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>ë¡œë˜ 6/45 ë¶„ì„</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">

  <!-- í—¤ë” (ìµœì‹  íšŒì°¨ + ë‹¹ì²¨ë²ˆí˜¸) -->

  <div class="header">
    <div style="display:flex;align-items:center;justify-content:space-between;">
      <button onclick="location.href='LoadData.html'" style="background:none;border:none;color:#667eea;font-size:22px;cursor:pointer;padding:0;">â†</button>
      <h1 style="font-size:20px;">ğŸ° ë¡œë˜ 6/45</h1>
      <div style="width:30px;"></div>
    </div>
    <div id="latestDraw" style="margin-top:10px;padding:10px;background:#f8f9fa;border-radius:10px;">
      <div style="font-size:11px;color:#888;margin-bottom:6px;" id="latestRoundLabel">ë°ì´í„° ë¡œë”© ì¤‘...</div>
      <div id="latestBalls" style="display:flex;gap:5px;justify-content:center;flex-wrap:wrap;"></div>
    </div>
  </div>

  <!-- íƒ­ -->

  <div class="tabs">
    <button class="tab active" onclick="switchTab('analysis',this)">ğŸ“Š ë¶„ì„</button>
    <button class="tab"        onclick="switchTab('recommend',this)">ğŸ¯ ì¶”ì²œ</button>
    <button class="tab"        onclick="switchTab('semiauto',this)">âœï¸ ë°˜ìë™</button>
    <button class="tab"        onclick="switchTab('records',this)">ğŸ“‹ ê¸°ë¡</button>
  </div>

  <!-- â–¶ ë¶„ì„ íƒ­ -->

  <div id="content-analysis" class="content">
    <div class="stats-grid">
      <div class="stat-card"><div class="stat-label">ì´ íšŒì°¨</div><div class="stat-value" id="stat-total">0</div></div>
      <div class="stat-card"><div class="stat-label">ìµœê·¼20íšŒ ê¸°ì¤€</div><div class="stat-value" style="font-size:16px;padding-top:6px;" id="stat-range">-</div></div>
      <div class="stat-card"><div class="stat-label">í™€ìˆ˜ ë¹„ìœ¨</div><div class="stat-value" id="stat-odd">0%</div></div>
      <div class="stat-card"><div class="stat-label">ì§ìˆ˜ ë¹„ìœ¨</div><div class="stat-value" id="stat-even">0%</div></div>
    </div>
    <div class="section-title">ğŸ”¥ í•«ë„˜ë²„ (ìµœê·¼ 20íšŒ top10)</div>
    <div class="number-grid" id="hotGrid"></div>
    <div class="section-title">â„ï¸ ì½œë“œë„˜ë²„ (ìµœê·¼ 20íšŒ bottom10)</div>
    <div class="number-grid" id="coldGrid"></div>
    <div class="section-title">ğŸ“Š ì „ì²´ ë²ˆí˜¸ (1~45)</div>
    <div class="number-grid" id="allGrid"></div>
    <div id="numberDetail" class="analysis-section hidden"></div>
    <div class="analysis-section">
      <div class="analysis-title">ğŸ“ˆ ì—°ì†ë²ˆí˜¸ ë¶„ì„</div>
      <div class="analysis-item"><span class="analysis-label">ì „ì²´ í¬í•¨ìœ¨</span><span class="analysis-value" id="consec-all">0%</span></div>
      <div class="analysis-item"><span class="analysis-label">ì „ì²´ í‰ê· </span><span class="analysis-value" id="consec-all-avg">0ê°œ</span></div>
      <div class="analysis-item"><span class="analysis-label">ìµœê·¼ 20íšŒ í¬í•¨ìœ¨</span><span class="analysis-value" id="consec-recent">0%</span></div>
      <div class="analysis-item"><span class="analysis-label">ìµœê·¼ 20íšŒ í‰ê· </span><span class="analysis-value" id="consec-recent-avg">0ê°œ</span></div>
    </div>
    <div class="analysis-section">
      <div class="analysis-title">ğŸ”— ACê°’ ë¶„ì„</div>
      <div class="analysis-item"><span class="analysis-label">ì „ì²´ í‰ê· </span><span class="analysis-value" id="ac-all">0</span></div>
      <div class="analysis-item"><span class="analysis-label">ìµœê·¼ 20íšŒ í‰ê· </span><span class="analysis-value" id="ac-recent">0</span></div>
      <div class="analysis-item"><span class="analysis-label">ìµœë¹ˆ ACê°’</span><span class="analysis-value" id="ac-mode">0</span></div>
    </div>
    <div class="section-title">ğŸ† TOP 15 ë¹ˆì¶œë²ˆí˜¸</div>
    <div class="bar-chart" id="topBars"></div>
  </div>

  <!-- â–¶ ì¶”ì²œ íƒ­ -->

  <div id="content-recommend" class="content hidden">
    <div class="section-title">ğŸ¯ AI ì¶”ì²œ ë²ˆí˜¸</div>
    <div class="analysis-section" style="text-align:center;">
      <div style="font-weight:bold;">ì¶”ì²œ ëŒ€ìƒ íšŒì°¨: <span id="nextRoundLabel" style="color:#667eea;font-size:20px;">-</span> íšŒ</div>
      <div style="font-size:12px;color:#666;margin-top:4px;">ê°±ì‹  íšŸìˆ˜: <span id="refreshCount">0</span></div>
    </div>
    <hr style="margin:14px 0;border-color:#eee;">

<!-- ê³ ê¸‰ ì—”ì§„ -->
<button class="btn btn-primary" id="advancedBtn" onclick="runAdvancedEngine()">ğŸš€ ê³ ê¸‰ ë¶„ì„ (íë¸Œ ML ì—”ì§„)</button>
<div id="advancedMonitor" style="display:none;">
  <div id="monitorPhaseRow" style="display:flex;gap:6px;margin-bottom:10px;font-size:11px;">
    <div id="phaseML"   class="phase-badge phase-wait">â‘  MLëª¨ë¸</div>
    <div style="color:#555;line-height:24px;">â†’</div>
    <div id="phaseEVO"  class="phase-badge phase-wait">â‘¡ íë¸Œì§„í™”</div>
    <div style="color:#555;line-height:24px;">â†’</div>
    <div id="phasePOOL" class="phase-badge phase-wait">â‘¢ ì¡°í•©ìƒì„±</div>
    <div style="color:#555;line-height:24px;">â†’</div>
    <div id="phaseDONE" class="phase-badge phase-wait">â‘£ ì™„ë£Œ</div>
  </div>
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;">
    <span id="monitorPhaseText" style="font-size:12px;color:#aaa;">ì¤€ë¹„ ì¤‘...</span>
    <span id="monitorPercent"   style="font-weight:bold;color:#00ff88;font-size:14px;">0%</span>
  </div>
  <div style="background:#333;border-radius:8px;height:18px;overflow:hidden;margin-bottom:4px;position:relative;">
    <div id="monitorBar" style="height:100%;width:0%;background:linear-gradient(90deg,#667eea,#00ff88);transition:width 0.4s;border-radius:8px;"></div>
  </div>
  <div style="display:flex;justify-content:space-between;font-size:10px;color:#666;margin-bottom:10px;">
    <span id="monitorElapsed">ê²½ê³¼: 0s</span>
    <span id="monitorETA">ë‚¨ì€ ì‹œê°„: ê³„ì‚° ì¤‘...</span>
  </div>
  <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:10px;text-align:center;">
    <div style="background:#16213e;border-radius:8px;padding:10px;">
      <div style="font-size:10px;color:#aaa;margin-bottom:3px;">ë¼ìš´ë“œ</div>
      <div style="display:flex;align-items:baseline;justify-content:center;gap:2px;">
        <div id="monitorRound" style="font-size:20px;font-weight:bold;color:#667eea;">0</div>
        <div id="monitorRoundTotal" style="font-size:10px;color:#555;">/ 50</div>
      </div>
    </div>
    <div style="background:#16213e;border-radius:8px;padding:10px;">
      <div style="font-size:10px;color:#aaa;margin-bottom:3px;">í›„ë³´ ì¡°í•©</div>
      <div id="monitorCandidates" style="font-size:20px;font-weight:bold;color:#ffd700;">0</div>
    </div>
    <div style="background:#16213e;border-radius:8px;padding:10px;">
      <div style="font-size:10px;color:#aaa;margin-bottom:3px;">ìµœê³  ì ìˆ˜</div>
      <div id="monitorBestScore" style="font-size:18px;font-weight:bold;color:#ff6b6b;">-</div>
    </div>
  </div>
  <div style="background:#16213e;border-radius:8px;padding:10px;margin-bottom:8px;">
    <div style="font-size:10px;color:#aaa;margin-bottom:6px;">ğŸ² í˜„ì¬ íƒìƒ‰ ì¡°í•©</div>
    <div id="monitorCurrentCombo" style="display:flex;gap:5px;justify-content:center;min-height:32px;align-items:center;">
      <span style="color:#555;font-size:12px;">ëŒ€ê¸° ì¤‘...</span>
    </div>
  </div>
  <div style="background:#0d1117;border-radius:8px;padding:10px;">
    <div style="display:flex;justify-content:space-between;margin-bottom:4px;">
      <span style="font-size:10px;color:#aaa;">ğŸ“‹ ì‹¤ì‹œê°„ ë¡œê·¸</span>
      <span id="monitorLogCount" style="font-size:10px;color:#555;">0ê°œ</span>
    </div>
    <div id="monitorLog" style="font-size:11px;font-family:monospace;color:#00ff88;max-height:100px;overflow-y:auto;line-height:1.9;"></div>
  </div>
</div>
<div id="advancedResults"></div>

<!-- ê¸°ë³¸ ì¶”ì²œ + ê°±ì‹ /ì €ì¥ ë²„íŠ¼ -->
<div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px;">
  <button class="btn btn-primary"   style="margin:0;" onclick="refreshRecommendations()">ğŸ”„ ê°±ì‹ </button>
  <button class="btn btn-save"      style="margin:0;" id="recSaveBtn" onclick="saveSelectedRecs()" disabled>ğŸ’¾ ì €ì¥</button>
</div>

<!-- ì¶”ì²œ ë²ˆí˜¸ ëª©ë¡ (ì„ íƒ ê°€ëŠ¥) -->
<div id="recommendations"></div>

<div class="alert alert-warning" style="text-align:center;margin-top:10px;">
  âš ï¸ ë¡œë˜ëŠ” í™•ë¥  ê²Œì„ì…ë‹ˆë‹¤.
</div>
  </div>

  <!-- â–¶ ë°˜ìë™ íƒ­ -->

  <div id="content-semiauto" class="content hidden">
    <div class="section-title">âœï¸ ë°˜ìë™ ë²ˆí˜¸ ìƒì„±</div>
    <div class="alert alert-info" style="margin-bottom:14px;font-size:13px;">
      ë²ˆí˜¸ë¥¼ ì§ì ‘ í„°ì¹˜í•´ì„œ ì„ íƒ (ìµœëŒ€ 6ê°œ).<br>6ê°œ ë¯¸ë§Œì´ë©´ ë‚˜ë¨¸ì§€ëŠ” íë¸Œ ì—”ì§„ ìë™ ì™„ì„±.
    </div>
    <div id="semiautoTickets"></div>
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:10px;">
      <button class="btn btn-primary"   style="margin:0;" onclick="addSemiTicket()">+ ì¶”ê°€</button>
      <button class="btn btn-secondary" style="margin:0;" onclick="clearAllTickets()">ì´ˆê¸°í™”</button>
      <button class="btn btn-save"      style="margin:0;" id="semiSaveBtn" onclick="saveSemiTickets()" disabled>ğŸ’¾ ì €ì¥</button>
    </div>
    <div id="semiResultPanel" style="display:none;">
      <div class="section-title" style="margin-top:10px;">ğŸŸï¸ ì™„ì„±ëœ ë²ˆí˜¸</div>
      <div id="semiResultList"></div>
      <button class="btn btn-primary" onclick="regenerateAuto()">ğŸ”„ ìë™ ë¶€ë¶„ ì¬ìƒì„±</button>
    </div>
  </div>

  <!-- â–¶ ê¸°ë¡ íƒ­ -->

  <div id="content-records" class="content hidden">
    <div class="section-title">ğŸ“‹ ë‚˜ì˜ ì¶”ì²œ ê¸°ë¡</div>
          <button onclick="testSave()" style="width:100%;padding:12px;background:#FF6B00;color:white;border:none;border-radius:10px;font-size:14px;font-weight:bold;cursor:pointer;margin-bottom:12px;">ğŸ”¥ DB ì €ì¥ í…ŒìŠ¤íŠ¸</button>
      <div id="recordsList">
      <div style="text-align:center;color:#aaa;padding:20px;font-size:13px;">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>
    </div>
  </div>

</div><!-- /container -->

<!-- ë²ˆí˜¸ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ -->

<div id="dialogOverlay" class="dialog-overlay hidden" onclick="closeDialogOutside(event)">
  <div class="dialog-box" onclick="event.stopPropagation()">
    <div class="dialog-title" id="dialogTitle">ë²ˆí˜¸ ì„ íƒ</div>
    <div class="dialog-grid" id="dialogGrid"></div>
    <div class="dialog-actions">
      <button class="d-cancel"  onclick="closeDialog()">ì·¨ì†Œ</button>
      <button class="d-confirm" onclick="confirmDialog()">í™•ì¸</button>
    </div>
  </div>
</div>

<script src="https://zerojat7-ui.github.io/LibraryJS/cube-engine.js"></script>

<script src="analysis.js"></script>

<script src="recommend.js"></script>

<script src="semiauto.js"></script>

<script src="app.js"></script>


    <script type="module">
      import { initializeApp } from
      "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
      import { getFirestore, collection, addDoc, serverTimestamp } from
      "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "ë„¤í‚¤",
        authDomain: "randextraccube-engine.firebaseapp.com",
        projectId: "randextraccube-engine",
        storageBucket: "randextraccube-engine.firebasestorage.app",
        messagingSenderId: "515597545439",
        appId: "1:515597545439:web:f1e804554406719a3cde6a"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      function getUserId() {
          let uid = localStorage.getItem('lotto_uid');
          if (!uid) {
              uid = crypto.randomUUID();
              localStorage.setItem('lotto_uid', uid);
          }
          return uid;
      }

      window.testSave = async function() {
          await addDoc(collection(db, "recommendations"), {
              userId: getUserId(),
              round: 1106,
              type: "basic",
              numbers: [1,6,7,25,34,42],
              matchCount: null,
              rank: null,
              createdAt: serverTimestamp()
          });
          alert("ì €ì¥ ì™„ë£Œ");
      }
    </script>

</body>
</html>